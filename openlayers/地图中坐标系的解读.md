# 坐标系





[三维笛卡尔坐标系](http://www.baidu.com/link?url=PMHRyUtsOK-5ZTbvVwMcpfF_KDmAAU-jC3GE0HRBOc2uFUpJulC1yVBiMSd9oj4iZfhTyRTwxwb7SlVEVT7RXxi-4vkysgfVO6SywXXb6CO)

我国常用的坐标系

openlayers中，坐标系的转换

cesium中 坐系的转换



在地理信息系统（GIS）中，坐标系是定位地球表面空间要素的 “数学框架”，直接影响空间数据的叠加分析、地图绘制和位置精度。根据维度（球面 / 平面）的不同，坐标系可分为**地理坐标系**和**投影坐标系**两大类。以下从核心概念、常用类型及应用场景展开解读。

EPSG 是大地基准面、空间参考系统等的公共注册中心，为每个坐标系都分配了相应编码。常见地理坐标系的 EPSG 编码如下：

- **WGS84 坐标系**：EPSG 编码为 **4326**，是目前应用最为广泛的坐标系统，与 GPS 定位相关的数据通常使用该坐标系。
- **Web Mercator 投影坐标系**：也称为伪墨卡托投影，EPSG 编码为 **3857**，是基于 WGS84 坐标系的墨卡托投影，是网络地图应用的标准投影
- **CGCS2000 坐标系**：EPSG 编码为 **4490**，是我国当前最新的国家大地坐标系，天地图采用的就是该坐标系。
- **北京 54 坐标系**：EPSG 编码为 **4214**，属于参心坐标系，是我国早期常用的坐标系。
- **西安 80 坐标系**：EPSG 编码为 **4610**，也是参心坐标系，曾用于我国大比例尺地形图等。
- **台湾地区 1997 坐标系（TWD97）**：EPSG 编码为 **3824**，基于 GRS 1980 椭球体。

## 一、坐标系的基本分类

GIS 中的坐标系本质是对地球表面的 “数学建模”：

### 第一类：地理坐标系 

- **第一类： 地理坐标系（Geographic Coordinate System1984, GCS）**也叫经纬度坐标，地心坐标系（球面定位）：基于球面，用**经纬度（φ,λ）** 描述位置（如北纬 30°，东经 120°），需依赖地球椭球体和大地基准面。WGS84 坐标系的原点是**地球的质心**（地球质量的中心）。**EPSG 编码为 4326**

​      适合全球范围的 3D/2D 地图展示，坐标格式通常是`[经度, 纬度, 高度]`（高度可选）。

**经纬度是WGS84的核心表达形式**‌：WGS84坐标系通过大地经度（Longitude）、大地纬度（Latitude）和大地高（Altitude）描述位置，简称LLA坐标系。‌‌3‌‌4

- 经度范围：-180°至+180°（东经为正，西经为负）。
- 纬度范围：-90°至+90°（北纬为正，南纬为负）。
- 高程基准为WGS84椭球面，向外为正。‌‌

‌**实际应用中的表现**‌

- ‌**GPS设备输出**‌：大多数GPS和北斗设备直接提供WGS84经纬度坐标。‌‌‌‌
- ‌**国际标准性**‌：谷歌地球等全球性平台默认使用WGS84经纬度，而中国境内因加密要求采用GCJ-02坐标系（火星坐标）。（‌‌‌‌ GCJ-02是由中国国家测绘局（G表示Guojia国家，C表示Cehui测绘，J表示Ju局）制订的[地理信息系统](https://baike.baidu.com/item/地理信息系统/171830?fromModule=lemma_inlink)的[坐标系统](https://baike.baidu.com/item/坐标系统/4725756?fromModule=lemma_inlink)。它是一种对[经纬度](https://baike.baidu.com/item/经纬度/1113442?fromModule=lemma_inlink)[数据](https://baike.baidu.com/item/数据/5947370?fromModule=lemma_inlink)的[加密算法](https://baike.baidu.com/item/加密算法/2816213?fromModule=lemma_inlink)，即加入随机的偏差。）

####      该类下的命名坐标系有哪些？

- **WGS84 坐标系**：全称 World Geodetic System 1984，是 1984 年美国国防部制图局发布的世界大地坐标系。其坐标原点为地球质心，EPSG 编码为 4326。它是 GPS 星历的坐标系，全球统一使用，谷歌地图在国外也采用此坐标系。

- **CGCS2000 坐标系**：即 2000 国家大地坐标系，EPSG 编码为 4490。该坐标系以地球质心为原点，其椭球和 WGS84 椭球极为相似，偏差仅有 0.11mm，可兼容使用。是我国当前常用的大地坐标系，天地图采用的就是该坐标系。

- **北京 54 坐标系**：是前苏联 1942 年坐标系的延伸，采用克拉索夫斯基椭球体，原点在前苏联的普尔科沃。它是我国比较常用的参心坐标系，参心即指参考椭球的中心。

- **西安 80 坐标系**：1978 年 4 月在西安召开全国天文大地网平差会议，确定重新定位，建立了我国新的坐标系，即 1980 国家大地坐标系。该坐标系采用 IAG75 椭球体，大地原点设在我国中部的陕西省泾阳县永乐镇，故又称 1980 西安坐标系，同样属于参心坐标系。

- **GCJ02 坐标系**：又称火星坐标系，是由中国国家测绘局制定的地理坐标系，对 WGS84 坐标进行了加密偏移处理。高德地图、腾讯地图等国内常用地图服务在国内使用的就是该坐标系。

- **BD09 坐标系**：即百度坐标系，是百度地图使用的坐标系，它是在 GCJ02 坐标系的基础上再次加偏得到的。

  

###    第二类： 投影坐标系

- **第二类： 投影坐标系（Projected Coordinate System, PCS）（平面定位）**：基于平面，将球面坐标通过数学投影转换为**平面直角坐标（x,y）**（如 x=350000 米，y=3500000 米）单位是m米，需依赖地理坐标系和投影方法。 主要目的是， 打印到纸面上展示。

- 在 Web Mercator 坐标系中，以本初子午线作为中央经线，赤道作为标准纬线，两者交点为坐标原点。向西为 X 轴负方向，向东为 X 轴正方向。

  Web Mercator 坐标系 **X 轴的取值范围是 (-20037508.3427892, 20037508.3427892) 米**，对应的经度范围是 **(-180°, 180°)**，所以其最西端对应的经度为 - 180°，坐标值约为 - 20037508.3427892 米。

  **y 轴取值范围**大约是 **- 20037508.3427892 到 20037508.3427892 之间，单位为米**。

  由于墨卡托投影的特性，当纬度接近两极（即 90°）时，投影后平面坐标的 y 值趋向于无穷大。但为了让投影后的平面能在一个正方形内表示，便于网页上的计算和显示，y 轴范围被限定在与 x 轴相同的取值区间内。该范围对应的纬度范围**约为 - 85.06° 到 85.06°** 之间。

- ‌**实际应用中的表现**‌ 

​        加载谷歌 / 百度等在线地图、2D 绘图

- **适用场景**：几乎所有主流在线地图（如谷歌地图、OpenStreetMap、高德地图、百度地图等）都采用该投影，因为它能将球面地图转换为正方形平面，便于网页加载、缩放和瓦片切割。

####      该类下的命名坐标系有哪些？

- **Web Mercator 投影坐标系**：也称为**伪墨卡托投影**，**EPSG 编码为 3857**，是基于 WGS84 坐标系的墨卡托投影，是网络地图应用的标准投影。它将地球投影到一张长方形图上，投影结果是正方形，计算简单，切图方便，谷歌地图、OSM、高德地图、腾讯地图等网络地图均使用该投影坐标系。
- **BD09MC 投影坐标系**：是 BD09 坐标系的 Web - Mercator 投影坐标系。百度地图基于 Web - Mercator 投影进行了修改，加入了常量矩阵，分区域对投影结果进行纠正，以保障投影后的线性单调性。其椭球赤道半径 a=6378206m，极半径 b=6356584.314245179m，数据覆盖范围与 Web - Mercator 投影一致。
- **UTM 投影坐标系**：全称通用横轴墨卡托投影，是一种国际标准化的地图投影法。它以 WGS84 坐标系为基础，使用笛卡尔坐标系，标记南纬 80° 至北纬 84° 之间的位置。UTM 是一种分度带投影，不同经度区间有不同的 EPSG 编码，常用于无人驾驶及高精地图，一些网站上的卫星影像和自然资源数据也会用其编码进行索引。
- **高斯 - 克吕格投影坐标系**：如 Beijing 1954 / 3 - degree Gauss - Kruger zone 39（3 度分带法的北京 54 坐标系，中央经线在东 117 度的分带坐标）。该投影因经纬度变化会产生变形，离中央子午线越远变形越大，所以常按经线跨度分为 6° 分带和 3° 分带，1:2.5 至 1:50 万比例尺地形图采用 6° 分带，1:1 万比例尺地形图采用 3° 分带，主要用于国家基础测绘等对精度要求较高的场景。
- **兰伯特投影坐标系**：包括兰伯特等角圆锥投影和兰伯特等积圆锥投影等。兰伯特等角圆锥投影角度和形状不变，常用于航空航海图，便于航向计算；兰伯特等积圆锥投影面积不变，适合用于需要保持面积准确性的地图，如区域面积统计地图等。



简单说：**看全球、用 3D 就选 WGS84；做网页 2D 地图、用在线瓦片就选 Web Mercator**，这两个是两者最常用的 “通用语言”。



## 笛卡尔坐标

笛卡尔坐标（Cartesian Coordinates）是一种用数值描述平面或空间中某点位置的坐标系，由法国数学家笛卡尔创立，核心是通过**互相垂直的坐标轴**确定点的位置，是地理信息系统（GIS）、数学、物理等领域的基础工具。

### 一、核心特点

- **坐标轴垂直**：至少有两条（平面）或三条（空间）互相垂直的直线（坐标轴），交点为**原点（0,0）或（0,0,0）**。
- **坐标值**：用一组有序数字表示点的位置，数字的顺序对应坐标轴的顺序（如平面中 “x 先 y 后”）。

### 二、常见类型

#### 1. 平面笛卡尔坐标（2D）

- **坐标轴**：x 轴（水平方向）和 y 轴（垂直方向），原点是两者的交点（0,0）。

- 坐标形式

  ：（x, y），其中：

  - x 表示点到 y 轴的水平距离（右为正，左为负）；
  - y 表示点到 x 轴的垂直距离（上为正，下为负）。

- **例子**：地图上的平面坐标（如 Web Mercator 投影后的坐标 “x=350000 米，y=3500000 米”）就是平面笛卡尔坐标。

#### 2. 空间笛卡尔坐标（3D）

- **坐标轴**：在 x、y 轴基础上增加 z 轴（垂直于平面，指向空间），原点是三条轴的交点（0,0,0）。
- **坐标形式**：（x, y, z），z 表示点到 x-y 平面的垂直距离（上为正，下为负）。
- **例子**：Cesium 中的 3D 地球坐标（如某建筑的位置 “x=120000 米，y=300000 米，z=500 米”）就是空间笛卡尔坐标，z 值代表海拔高度。

### 三、与地理坐标的区别

- **地理坐标**：用经纬度（球面坐标）描述地球表面位置（如北纬 30°，东经 120°），基于球面；
- **笛卡尔坐标**：用 x、y、z（平面 / 空间直角坐标）描述位置，基于平面或立体空间，是地理坐标经过投影后的 “平面化结果”（如 Web Mercator 投影本质是将经纬度转换为平面笛卡尔坐标）。

### 一句话总结

笛卡尔坐标就像 “带刻度的方格纸”，通过垂直的坐标轴和数字，精准标记出平面或空间中任何一点的位置，是 GIS 中展示和计算平面 / 3D 数据的基础。



### 坐标转换库**proj4js** 

`import proj4 from 'proj4';` 导入的是 **proj4js** 库，这是一个用于地理坐标投影转换的 JavaScript 库，主要作用是实现不同空间参考系统（坐标系统）之间的坐标转换。

在地理信息系统（GIS）和地图应用中，不同的地图数据可能采用不同的坐标系统（例如经纬度坐标、墨卡托投影坐标等），proj4js 就是解决这些坐标系统之间转换问题的核心工具。

### 具体作用与应用场景

1. **坐标系统转换**
   地球是一个不规则球体，为了在平面上表示地理位置，人们定义了多种坐标投影方式（如 WGS84 经纬度、UTM 分区、Web 墨卡托等）。proj4js 可以将一个坐标系统中的点（如 `[经度, 纬度]`）转换为另一个坐标系统中的点（如 Web 墨卡托的 `[x, y]` 像素坐标）。

   示例：将 WGS84 经纬度（40°N, 116°E）转换为 Web 墨卡托坐标

   javascript

   

   ```javascript
   // 定义WGS84坐标系统（EPSG:4326）和Web墨卡托（EPSG:3857）
   proj4.defs('EPSG:4326', '+proj=longlat +datum=WGS84 +no_defs');
   proj4.defs('EPSG:3857', '+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs');
   
   // 转换：[经度, 纬度] → Web墨卡托[x, y]
   const wgs84Coord = [116, 40]; // 北京大致坐标
   const webMercatorCoord = proj4('EPSG:4326', 'EPSG:3857', wgs84Coord);
   console.log(webMercatorCoord); // 输出类似 [12911845.12, 4865977.17] 的墨卡托坐标
   ```

   

2. **支持自定义投影**
   除了常见的标准坐标系统（如 EPSG 编码定义的系统），proj4js 还支持通过 **proj 字符串** 定义自定义投影参数，满足特殊场景的转换需求。

3. **与地图库集成**
   在 OpenLayers、Leaflet 等地图库中，proj4js 常被用作坐标转换的底层依赖。例如：

   - OpenLayers 中通过 proj4js 扩展对非默认坐标系统的支持；
   - 当加载的地图数据（如 GeoJSON、瓦片）采用的坐标系统与地图视图不一致时，用 proj4js 进行实时转换。

### 总结

proj4js 是地理信息应用中处理坐标转换的基础工具，它解决了不同地图投影之间的 “语言互通” 问题，确保各种来源的地理数据能在同一地图中正确叠加和显示。如果你的项目涉及地图开发、GIS 数据处理，且需要处理多种坐标系统，proj4js 是必不可少的依赖。





## 拓展

##### 大地坐标系

大地坐标系（Geodetic Coordinate System）是一种用于 表示地球上位置的坐标系统，考虑了地球的形状和尺寸 ;

**常见的 大地坐标系 :**

- **WGS 84（World Geodetic System 1984）：** WGS 84是全球定位系统（GPS）的基准坐标系统，广泛应用于全球定位和导航。它采用十进制度表示经度和纬度。
- **NAD 83（North American Datum 1983）：** NAD 83是北美地区常用的大地坐标系统，用于测量、定位和地图制作。它在北美地区使用十进制度表示经度和纬度。
- **ETRS89（European Terrestrial Reference System 1989）：** ETRS89是欧洲地区的大地坐标系统，用于测量和地图制作。它使用十进制度表示经度和纬度。

### 加密坐标系

不同国家 可能使用 不同的加密坐标系，以保护地理数据的安全性和精确性。

想要通过地图获取某个建筑的准确坐标是实现不了的 ;

手机上获取的 GPS 坐标是准确的 WGS 84 坐标 , 如果直接显示在地图上会有几百米偏移 , 需要将该坐标加密 , 然后才能准确显示到地图上 ;

**以下是一些国家常见的加密坐标系的示例：**

- **GCJ-02（国测局加密坐标）：** 中国采用的加密坐标系，也称为火星坐标系，对WGS 84坐标进行加密偏移。
- **BD-09（百度坐标）：** 百度地图使用的加密坐标系，对GCJ-02坐标进行加密偏移。
- **Kartverket GK（挪威国家地理信息系统）：** 挪威采用的加密坐标系，对WGS 84坐标进行加密和转换。
- **SWEREF 99 TM（瑞典坐标）：** 瑞典采用的加密坐标系，用于地图制作和位置定位，对WGS 84坐标进行加密和转换。

这只是一小部分示例，实际上 不同国家可能有自己独特的加密坐标系或采用其他加密技术来保护地理数据。

这些加密坐标系通常在国家级别的地理信息系统或地图服务中使用，以确保数据的安全性和准确性。

在处理和转换这些加密坐标时，需要使用相应的转换参数和算法，以保持数据的正确性和一致性。

#### 2、WGS 84 坐标体系简介

##### 坐标加密

电子地图中的位置 , 并不是真实位置 ;

在电子地图 ( 高德地图 / 百度地图 / Google 地图 ) 中 , 每个 建筑 / 设施 的坐标都是经过加密处理的 ;

地图绘制时 , 一般使用 WGS 84 地理坐标体系 ;

##### WGS 84 由来

WGS 84 全称 World Geodetic System 1984 , 由 美国国防部 和 国家地理空间情报局 NGA 联合开发 ;

该坐标 是 GPS ( Global Positioning System 全球定位系统 ) 使用的 基准坐标系统 ;

##### 经度和纬度

WGS 84 采用 经度 ( Longitude ) 和 纬度 ( Latitude ) 的形式表示地球表面上的位置 ,

- 经度表示东西方向上的位置 , 取值范围是 -180 度到 +180 度 ;
- 纬度表示南北方向上的位置 , 取值范围是 -90 度 到 +90度 ;

##### WGS 84 应用场景

WGS 84 坐标体系 基于地球椭球体模型 , 考虑了地球的 形状和尺寸 , 是一个全球一致的坐标体系 ;

该坐标体系 被广泛应用于各种应用领域 , 包括

- 地理信息系统 ( GIS )
- GPS定位
- 航海
- 航空
- 地图制图

等领域 ;

WGS 84 坐标体系在GPS设备中常用于定位和导航，GPS接收器将接收到的卫星信号转换为WGS 84坐标来表示用户的位置。许多地理信息系统软件和在线地图服务也使用WGS 84作为默认的地理坐标系统。

##### 坐标和精度转换

WGS 84 坐标体系 是 基于大地测量 和 地球模型的估计值 ,

对于 特定应用 可能需要进行 坐标转换 或 与其他坐标系统 进行配准 ;

使用WGS 84坐标时，应了解具体应用的要求，

并 根据需要 进行必要的 坐标转换 和 转换精度 的考虑。

#### GCJ-02 坐标加密偏移

GCJ-02 是 " 中国国家测绘局加密坐标 " , 又称为 火星坐标系 , 由 中国国家测绘局 制定的 地理坐标系统 , 在中国境内进行定位 和 地图制作 , 必须使用 该坐标 ;

在中国境内 , 手机获取的 GPS 坐标 , 是 WGS 84 坐标 , 这是准确的坐标 , 但是如果想要显示在地图上的正确位置 , 需要 加入非线性随机偏差 , 效果如下 :

![](.\img\4.png)

上述 偏移后的坐标 , 距离原坐标点有 几百米 误差 ;

由于 偏移 是 非线性随机 的 , 因此想要根据 火星坐标 倒推出 真实坐标 是无法实现的 ;

![](.\img\5.png)

手机上获取的 WGS 84 坐标是准确的坐标 , 但是将该坐标 放到 地图上 , 就有很大的偏移 ;

手机的坐标是准确坐标 , 地图上的坐标是经过偏移后的坐标 , 要想将手机的坐标准确的显示到地图上 , 需要将 手机的 WGS 84 准确坐标转为 GCJ-02 国测局加密坐标 , 才能准确的显示到地图上 ;

上述 将 WGS 84 坐标 转为 GCJ-02 国测局加密坐标 需要通过 高德地图 / 百度地图 / 腾讯地图 的 API 完成 ;









#### 记坐标偏移项目实际案例

​      使用 Cesium地图加载摄像头数据，数据由客户使用手机端奥维app获取的经纬度，加载后，发现点位有数百米的偏差。



![](.\img\6.png)



 获知采集数据方式，坐标系为 ：加密国测局-02坐标系。 图示：经纬开启了国测局坐标按钮。