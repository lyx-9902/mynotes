## 准备工具

###   01. 模型数据

   由一个tileset.json的文件，和多个子文件。

![]()

![01](.\img\01.png)

#### 1. 核心模型文件（`.cmpt`）

`.cmpt` 这类文件，通常是**倾斜摄影测量**或**三维城市建模**中，对现实场景（如建筑、地形）进行三维重建后生成的 “单元模型文件”。



- 它可能包含**几何信息**（模型的点、线、面，描述形状结构）、**纹理信息**（贴在几何表面的图像，还原真实外观，比如建筑的墙面纹理、颜色）、**属性信息**（模型的分类、ID 等标注，方便后续管理或分析）。
- 多个 `.cmpt` 文件（如 `NoLod_56.cmpt` 到 `NoLod_72.cmpt`），可能是对不同区域、不同细节层级的模型拆分存储，后续可通过 “瓦片化” 等方式，按需加载不同范围 / 精度的模型。

#### 2. 瓦片数据集配置（`tileset.json`）

`tileset.json` 是**三维瓦片数据集**的 “配置核心”，用于组织和管理上述分散的模型文件（如 `.cmpt`）。



- 它会定义**瓦片的层级结构**（类似地图 “缩放级别”，远看加载粗粒度瓦片，近看加载细粒度瓦片，实现 “LOD（层次细节）” 效果，优化渲染性能）。
- 还会记录每个瓦片对应的**源文件路径**（指定哪些 `.cmpt` 属于哪个瓦片）、**空间范围**（瓦片在地理坐标系中的位置）等信息，让三维引擎能按需加载、拼接出完整的大场景。

#### 3. 其他辅助格式（如 `.b3dm`）

图中 `NoLod_62.b3dm` 这类 `.b3dm` 文件，是**3D Tiles** 标准下的 “批量 3D 模型瓦片” 格式（常见于 Cesium 等三维地理平台）。



- 它把三维模型（可能包含多个 `.cmpt` 类模型的聚合）与**批量渲染**的逻辑结合，能高效地在 Web 或三维引擎中加载大规模三维场景（比如整座城市的模型）。



简单说，这些文件是一套 “分工协作” 的体系：`.cmpt` 存具体模型，`tileset.json` 做全局组织配置，`.b3dm` 等辅助大规模高效渲染，共同实现三维场景的存储、管理与高效可视化。

## 02 CesiumLab

官网： https://bjxbsj.cn/index.html

功能如下菜单：  数据处理，和分发服务。

![01](.\img\2.png)



##### 发布步骤：

点击菜单：分发服务》模型切片服务

![01](.\img\03.png)

点击确定后，生成服务地址。

![01](.\img\04.png)

Cesiumjs中使用实例。



```json

    // 12号楼
    let buillding12tileset = new Cesium.Cesium3DTileset({
      url: 'http://localhost:9003/model/Fi8zaLLM/tileset.json',    //模型地址
      // url: 'http://192.168.112.3:9003/model/n5aAD5g6/tileset.json',
      dynamicScreenSpaceError: true,
      loadSiblings: true,
      preferLeaves: true,
      maximumScreenSpaceError: 8,
      maximumMemoryUsage: 256,
      skipLevelOfDetail: true,
    })
    buillding12tileset.readyPromise.then((tileset) => {
      // 调整高度
      let boundingSphere = tileset.boundingSphere
      let cartographic = Cesium.Cartographic.fromCartesian(boundingSphere.center)
      let surface = Cesium.Cartesian3.fromRadians(
        cartographic.longitude,
        cartographic.latitude,
        cartographic.height,
      )
      let offset = Cesium.Cartesian3.fromDegrees(
        113.84492706038141,
        34.701615938629154,
        cartographic.height + 7.4,
      )
      let translation = Cesium.Cartesian3.subtract(offset, surface, new Cesium.Cartesian3())
      tileset.modelMatrix = Cesium.Matrix4.fromTranslation(translation)
    })
    // @ts-ignore
    buillding12tileset.name = '12号楼'

    viewer.scene.primitives.add(buillding12tileset, 0)

```







